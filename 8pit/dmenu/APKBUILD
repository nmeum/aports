# Contributor: Eivind Uggedal <eivind@uggedal.com>
# Maintainer: SÃ¶ren Tempel <soeren+alpine@soeren-tempel.net>
pkgname=dmenu
pkgver=4.7
pkgrel=1
pkgdesc="Dynamic menu for X"
url="http://tools.suckless.org/dmenu/"
arch="all"
license="MIT"
depends=""
depends_dev=""
makedepends="libx11-dev libxinerama-dev libxft-dev"
install=""
options="!check"
subpackages="$pkgname-doc"
source="http://dl.suckless.org/tools/$pkgname-$pkgver.tar.gz
	config.h"
builddir="$srcdir"/$pkgname-$pkgver

prepare() {
	default_prepare

	cp "$srcdir"/config.h "$builddir"/config.h
	sed -i -e '/CFLAGS/{s/-Os//;s/=/+=/}' \
		-e '/LDFLAGS/{s/-s//;s/=/+=/}' \
		"$builddir"/config.mk
}

build() {
	make X11INC=/usr/include/X11 \
		X11LIB=/usr/lib/X11 \
		FREETYPEINC=/usr/include/freetype2 \
		-C "$builddir"
}

package() {
	make DESTDIR=$pkgdir PREFIX=/usr \
		-C "$builddir" install
}

sha512sums="67a184f3ddb018e7b372e049052662955403e3367639b9c2284939d6f105ae74c995fe38f126d8ff75886831c8add8b50e338a1bfb0d8620b7fb1457cf88a00c  dmenu-4.7.tar.gz
0f145edcf4ced14d0f14e5f7683bf83b6f97648b57d4dae0f695b3ff63edeb062f8e47a352ddc4a484a134cce4a9324326155b5e614336da34ad1a08c93cda5e  config.h"
