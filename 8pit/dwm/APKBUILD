# Contributor: Gaber Ayoubi <gaber.ayoubi@gmail.com>
# Maintainer: SÃ¶ren Tempel <soeren+alpine@soeren-tempel.net>
pkgname=dwm
pkgver=6.1
pkgrel=3
pkgdesc="dwm - dynamic window manager"
url="http://dwm.suckless.org"
arch="all"
license="MIT/X"
depends=""
depends_dev=""
makedepends="libxft-dev libx11-dev libxinerama-dev"
install=""
subpackages="$pkgname-doc"
source="http://dl.suckless.org/$pkgname/$pkgname-$pkgver.tar.gz
	fix-movemouse.patch
	movefloating.patch
	XF86keysym.patch
	movestack.patch
	fullscreen.patch
	incnmaster.patch
	config.h"

builddir="$srcdir"/$pkgname-$pkgver
prepare() {
	cd "$builddir"
	default_prepare || return 1

	cp "$srcdir"/config.h config.h || return 1
	sed -i -e '/CFLAGS/{s/-Os//;s/=/+=/}' \
		-e '/LDFLAGS/{s/-s//;s/=/+=/}' \
		config.mk || return 1
}

build() {
	make X11INC=/usr/include/X11 \
		X11LIB=/usr/lib/X11 \
		FREETYPEINC=/usr/include/freetype2 \
		-C "$builddir" || return 1
}

package() {
	make PREFIX=/usr DESTDIR="$pkgdir" \
		-C "$builddir" install || return 1
}

sha512sums="875644bbc246088f2c87e50debbadd4bc179444b396b1b327149087e8bc5303325ebc9103a7e3c864266ee1ac683ea3cd8f0a08285c8e46fc4389d5b83a555f1  dwm-6.1.tar.gz
a33d9dc4628538c44b5605830c1b2ac3a9b633ab2692ccdb425d60f2760353b9c03c13f07e0611bf3511b8e8a1b562c284931195198966e4665242da44217d39  fix-movemouse.patch
4f23f5f6a2132265870e04c6bf86efa03de689f50c43b24845c130c83d13f5c02a7677f732bc756b190b730e6df2dfda6363f7b0b0239ecc22a77abc1d01c737  movefloating.patch
236058497dcedbcd490ca79739ce0ce7b96fc7369394486a9809c478b07b54f56b3e49e8201017ab45d4c406ae80771bbc03a27943f15bd52ad373b4da4b200c  XF86keysym.patch
1faa8639d8a5a8385108a0543f47cf720933833bad6aaa5d2612eed3c86fd6036a1acd05e7eb8b0b5e18cafbdabe256100fbde43f371455182f5d62b0203a068  movestack.patch
fc8fd6427d8d1199a6d2a85744b424caa6ab620bfbd84543012c0493caa7ec56eb843e1bf12a5c019588f4a59a5178e6463939a3f8dfcf3c4fe810c8238f4d05  fullscreen.patch
0d22726afec77bcdda0ffb01bde671e0e518f232e1692a3ca1560637f500a3e3b97d4f41386d21eada4f89da2595423a9bf4912033a12945652c524c2640624e  incnmaster.patch
b376f447392337671f48ef7e042939536e2a9c73a7af44278aaa6727d8c319ad2f2ba691bc568c786f7f26c5667bcae8ccbd2855f45ce7c058e6f79d88f18dfe  config.h"
