# Contributor: Gaber Ayoubi <gaber.ayoubi@gmail.com>
# Maintainer: SÃ¶ren Tempel <soeren+alpine@soeren-tempel.net>
pkgname=dwm
pkgver=6.2
_commit="d06ec231c7e1ca332efa1e7532b812fd6854643d"
pkgrel=1
pkgdesc="dwm - dynamic window manager"
url="https://dwm.suckless.org"
arch="all"
license="MIT/X"
makedepends="libxft-dev libx11-dev libxinerama-dev"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver-8pit.tar.gz::https://github.com/nmeum/dwm/archive/${_commit}.tar.gz
	config.h"
builddir="$srcdir"/$pkgname-$_commit

prepare() {
	default_prepare
	cp "$srcdir"/config.h "$builddir"/config.h
	sed -i -e '/CFLAGS/{s/-Os//;s/=/+=/}' \
		-e '/LDFLAGS/{s/=/+=/}' \
		"$builddir"/config.mk
}

build() {
	make X11INC=/usr/include/X11 \
		X11LIB=/usr/lib/X11 \
		FREETYPEINC=/usr/include/freetype2
}

package() {
	make PREFIX=/usr DESTDIR="$pkgdir" install
}

sha512sums="
6380c20477464de350bd5d137999749a68b49e6f7deb7b7b8d28118015caa22b4c1b3004a8e515c5f0b6f9593c4131d8c2fc1caace3e8caf3671c96e7d6100d0  dwm-6.2-8pit.tar.gz
a9b6dc53941f68c439e39d0389eda2c4bc919ffcc1bc51d5e933430f78764a2d9f92288d46c1da179027975585caf099a2f49085b431687160b946ac1f746adc  config.h
"
