# Contributor: Gaber Ayoubi <gaber.ayoubi@gmail.com>
# Maintainer: SÃ¶ren Tempel <soeren+alpine@soeren-tempel.net>
pkgname=dwm
pkgver=6.1
_commit="b6a6780c7a2844518b4d9ec0317a670cb0be16bc"
pkgrel=3
pkgdesc="dwm - dynamic window manager"
url="http://dwm.suckless.org"
arch="all"
license="MIT/X"
depends=""
depends_dev=""
makedepends="libxft-dev libx11-dev libxinerama-dev"
install=""
subpackages="$pkgname-doc"
source="$pkgname-$pkgver-8pit.tar.gz::https://github.com/nmeum/dwm/archive/${_commit}.tar.gz
	config.h"
builddir="$srcdir"/$pkgname-$_commit

prepare() {
	cd "$builddir"
	default_prepare || return 1

	cp "$srcdir"/config.h config.h || return 1
	sed -i -e '/CFLAGS/{s/-Os//;s/=/+=/}' \
		-e '/LDFLAGS/{s/-s//;s/=/+=/}' \
		config.mk || return 1
}

build() {
	make X11INC=/usr/include/X11 \
		X11LIB=/usr/lib/X11 \
		FREETYPEINC=/usr/include/freetype2 \
		-C "$builddir" || return 1
}

package() {
	make PREFIX=/usr DESTDIR="$pkgdir" \
		-C "$builddir" install || return 1
}

sha512sums="e300c011abbbf44fb21bada29f4960b404a945e66b18b1beaa0829530d64e6bbc985e36f2121b3d7b23e1d8ec36dba6aa73d4b459c99aadea6bcd99b6d56ee8e  dwm-6.1-8pit.tar.gz
d09658824871e1fcc2f4fff7a32e80276630c0153817c99fc1c62af9c01ffdc3e6fb3bfd44111fdb92a9e18c52e3322b71ee19d70f29e96277c0c62fd4598cce  config.h"
