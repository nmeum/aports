# Contributor: Gaber Ayoubi <gaber.ayoubi@gmail.com>
# Maintainer: SÃ¶ren Tempel <soeren+alpine@soeren-tempel.net>
pkgname=dwm
pkgver=6.2
_commit="18c53daee2ed56399019ed71b602fa5b9d0950ef"
pkgrel=1
pkgdesc="dwm - dynamic window manager"
url="http://dwm.suckless.org"
arch="all"
license="MIT/X"
depends=""
depends_dev=""
makedepends="libxft-dev libx11-dev libxinerama-dev"
install=""
subpackages="$pkgname-doc"
source="$pkgname-$pkgver-8pit.tar.gz::https://github.com/nmeum/dwm/archive/${_commit}.tar.gz
	config.h"
builddir="$srcdir"/$pkgname-$_commit

prepare() {
	cd "$builddir"
	default_prepare

	cp "$srcdir"/config.h config.h
	sed -i -e '/CFLAGS/{s/-Os//;s/=/+=/}' \
		-e '/LDFLAGS/{s/=/+=/}' \
		config.mk
}

build() {
	make X11INC=/usr/include/X11 \
		X11LIB=/usr/lib/X11 \
		FREETYPEINC=/usr/include/freetype2 \
		-C "$builddir"
}

package() {
	make PREFIX=/usr DESTDIR="$pkgdir" \
		-C "$builddir" install
}

sha512sums="b8aecf8adf4917aec4da49070af93df043f7e2cd2c5ee4669abb9b9c83a41496b63606a73fd84e7a0adeb54b35127d6561d7a3e821ff5ec9e46f626eb8843b7e  dwm-6.2-8pit.tar.gz
24097f6ba9cf661cd90f19b93d3eef46a982e87c22848dc5331c64e8532f8beb1c650822c44bfcd0994f4d5bc3f13f954c1587d285b0ca661635a77298f0a68d  config.h"
