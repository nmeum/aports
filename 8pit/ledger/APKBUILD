# Contributor: SÃ¶ren Tempel <soeren+alpine@soeren-tempel.net>
# Maintainer:
pkgname=ledger
pkgver=20170520
_commit=1ae5c6594583877f353b074cc94ba49ed556dff4
pkgrel=0
pkgdesc="Command line double-entry accounting program"
url="https://github.com/howeyc/ledger"
arch="all"
license="MIT"
depends=""
makedepends="go"
install=""
subpackages=""
source="https://github.com/howeyc/ledger/archive/${_commit}.tar.gz"
builddir="$srcdir/$pkgname-$_commit"
_gopath="github.com/howeyc/ledger"

prepare() {
	default_prepare
	cd "$builddir"

	mkdir -p src/github.com/howeyc/
	ln -s ../../../ src/"$_gopath"
}

check() {
	cd "$builddir/src/$_gopath"
	go test
}

build() {
	cd "$builddir/src/$_gopath"
	export GOPATH="$(pwd)"

	cd cmd/ledger
	go build
}

package() {
	install -Dm755 "$builddir/src/$_gopath"/cmd/ledger/ledger \
		"$pkgdir"/usr/bin/ledger
}

sha512sums="6dba320c13a92ea11a36ce7fe57ddb52ac6f5e791240cca5bee35d997ab473a919cf0f7df1857aadccf270067b86ac1e78c0f7411225885a2cace69a95b0239b  1ae5c6594583877f353b074cc94ba49ed556dff4.tar.gz"
