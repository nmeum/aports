# Contributor: Sören Tempel <soeren+alpine@soeren-tempel.net>
# Maintainer: Sören Tempel <soeren+alpine@soeren-tempel.net>
pkgname=nlmon
pkgver=0.3_git20160208
pkgrel=0
verbase=0.3
pkgdesc="A lightweight udevadm monitor replacement"
url="http://git.r-36.net/nlmon/"
arch="all"
license="MIT"
depends=""
depends_dev=""
makedepends="linux-headers"
install=""
subpackages="$pkgname-doc"
source="http://files.8pit.net/alpine/distfiles/$pkgname-$pkgver.tar.gz"

disturl="lithium:/var/www/htdocs/files.8pit.net/alpine/distfiles/"
reporev="5881cff90359800b1d01ebc0bf35f53f4a67815d"
giturl="git://git.r-36.net/$pkgname"

_builddir="$srcdir"/$pkgname-$pkgver
prepare() {
	local i
	cd "$_builddir"
	for i in $source; do
		case $i in
		*.patch) msg $i; patch -p1 -i "$srcdir"/$i || return 1;;
		esac
	done
}

build() {
	make CFLAGS="$CFLAGS \${INCS} \${CPPFLAGS}" \
		LDFLAGS="$LDFLAGS \${LIBS}" CC="${CC:-gcc}" \
		-C "$_builddir" || return 1
}

package() {
	make DESTDIR="$pkgdir" PREFIX=/usr \
		-C "$_builddir" install || return 1
}

md5sums="79cc3840879d6370aa5adccc97c7acf2  nlmon-0.3_git20160208.tar.gz"
sha256sums="e9e113d344372c7b9d8321f6fa19a35b190e2989bbda9a005a049b499faef11a  nlmon-0.3_git20160208.tar.gz"
sha512sums="581cb69224552fe293f3ed2da783223570e19d84cbab5c12479cf48088522b9a1d565626d1c24690cb2464858f34cfa9595830395e70f36056ab71631afad3a0  nlmon-0.3_git20160208.tar.gz"
