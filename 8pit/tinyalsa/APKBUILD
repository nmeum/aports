# Contributor: Sören Tempel <soeren+alpine@soeren-tempel.net>
# Maintainer: Sören Tempel <soeren+alpine@soeren-tempel.net>
pkgname=tinyalsa
pkgver=20160724
_commit="b47a014f1460ffd6479fd8306c679475b03f27f1"
pkgrel=0
pkgdesc="Tiny library to interface with ALSA in the Linux kernel"
url="https://github.com/tinyalsa/tinyalsa"
arch="all"
license="BSD"
depends=""
depends_dev=""
makedepends="$depends_dev linux-headers"
install=""
subpackages="$pkgname-dev $pkgname-utils"
source="$pkgname-$pkgname.tar.gz::https://github.com/$pkgname/$pkgname/archive/${_commit}.tar.gz"

_builddir="$srcdir"/$pkgname-$_commit
build() {
	make -C "$_builddir" || return 1
}

package() {
	cd "$_builddir"
	mkdir -p "$pkgdir"/usr/lib/ "$pkgdir"/usr/include

	cp -r include/tinyalsa/ "$pkgdir"/usr/include || return 1
	install -Dm644 libtinyalsa.a libtinyalsa.so \
		"$pkgdir"/usr/lib/ || return 1
}

utils() {
	pkgdesc="$pkgdesc (tools)"
	depends=""

	cd "$_builddir"
	mkdir -p "$subpkgdir"/usr/bin/
	install -Dm755 tinyplay tinycap tinymix tinypcminfo \
		"$subpkgdir"/usr/bin/ || return 1
}

md5sums="a43e50a74f137c161e6e462c2a1e4298  tinyalsa-tinyalsa.tar.gz"
sha256sums="db9f0163068d7d1cdb4edf2edeaed756b2f7e1e35d3eddf449c6228e37f74bd5  tinyalsa-tinyalsa.tar.gz"
sha512sums="5155a8a13287033a9a8d905e12ec45a5193fc94cc4c586b7a609cfb8378c9db5b6871570c9cee0a6194cf582e832edf315f72fbe5080788ad2e1e945ebe608e6  tinyalsa-tinyalsa.tar.gz"
