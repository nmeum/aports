# Contributor: Sören Tempel <soeren+alpine@soeren-tempel.net>
# Maintainer: Sören Tempel <soeren+alpine@soeren-tempel.net>
pkgname=tinyalsa
pkgver=20161112
_commit="eccd781875925157a01a755d555b7e1e6d80fae1"
pkgrel=0
pkgdesc="Tiny library to interface with ALSA in the Linux kernel"
url="https://github.com/tinyalsa/tinyalsa"
arch="all"
license="BSD"
depends=""
depends_dev=""
makedepends="$depends_dev linux-headers"
install=""
subpackages="$pkgname-dev $pkgname-doc $pkgname-utils"
source="$pkgname-$pkgname.tar.gz::https://github.com/$pkgname/$pkgname/archive/${_commit}.tar.gz"

builddir="$srcdir"/$pkgname-$_commit
build() {
	make -C "$builddir" || return 1
}

package() {
	make PREFIX=/usr DESTDIR="$pkgdir" \
		-C "$builddir" install || return 1
}

utils() {
	pkgdesc="$pkgdesc (utils)"
	depends=""

	mkdir -p "$subpkgdir"/usr/bin/
	for util in tinyplay tinycap tinymix tinypcminfo; do
		mv "$pkgdir"/usr/bin/$util \
			"$subpkgdir"/usr/bin/ || return 1
	done
}

md5sums="6d63e7281173c15070d610c0def76cb3  tinyalsa-tinyalsa.tar.gz"
sha256sums="af7ffd8b42cb04ffd363db98b196427639660389027d92ade46c9c523aa02264  tinyalsa-tinyalsa.tar.gz"
sha512sums="31b0bd6bc681da6de3d4de41236d9de6205334d79451b42eacd0064babb07074d7f5b6a88214c6b1057447a11194e259ee958715982912f3059efc5ec39d9ff5  tinyalsa-tinyalsa.tar.gz"
