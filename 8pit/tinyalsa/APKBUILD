# Contributor: Sören Tempel <soeren+alpine@soeren-tempel.net>
# Maintainer: Sören Tempel <soeren+alpine@soeren-tempel.net>
pkgname=tinyalsa
pkgver=20160314
_commit="9bad3fa00f3080906566c6b3acd14513d1ae4afd"
pkgrel=0
pkgdesc="Tiny library to interface with ALSA in the Linux kernel"
url="https://github.com/tinyalsa/tinyalsa"
arch="all"
license="BSD"
depends=""
depends_dev=""
makedepends="$depends_dev linux-headers"
install=""
subpackages="$pkgname-dev $pkgname-utils"
source="$pkgname-$pkgname.tar.gz::https://github.com/$pkgname/$pkgname/archive/${_commit}.tar.gz"

_builddir="$srcdir"/$pkgname-$_commit
build() {
	make -C "$_builddir" || return 1
}

package() {
	cd "$_builddir"
	mkdir -p "$pkgdir"/usr/lib/ "$pkgdir"/usr/include

	cp -r include/tinyalsa/ "$pkgdir"/usr/include || return 1
	install -Dm644 libtinyalsa.a libtinyalsa.so \
		"$pkgdir"/usr/lib/ || return 1
}

utils() {
	pkgdesc="$pkgdesc (tools)"
	depends=""

	cd "$_builddir"
	mkdir -p "$subpkgdir"/usr/bin/
	install -Dm755 tinyplay tinycap tinymix tinypcminfo \
		"$subpkgdir"/usr/bin/ || return 1
}

md5sums="0d6df90e9079c89c6a633a6dae52d591  tinyalsa-tinyalsa.tar.gz"
sha256sums="cf9809ffb207203b6fbee44a3b6eef25180fe26607197a46810c679feeb7e940  tinyalsa-tinyalsa.tar.gz"
sha512sums="11223a4e6cc3a85269744a4487ee3d9bca0a6f670ebf51f6586a9f0142052695896f16a6c4968d31aa96449f67d78512536a3387a1f9afce78af4cdd709c3c06  tinyalsa-tinyalsa.tar.gz"
