# Contributor: Sören Tempel <soeren+alpine@soeren-tempel.net>
# Maintainer: Sören Tempel <soeren+alpine@soeren-tempel.net>
pkgname=tinyalsa
pkgver=1.1.1
pkgrel=1
pkgdesc="Tiny library to interface with ALSA in the Linux kernel"
url="https://github.com/tinyalsa/tinyalsa"
arch="all"
license="BSD-3-Clause"
makedepends="$depends_dev linux-headers"
subpackages="$pkgname-libs $pkgname-static $pkgname-dev $pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/tinyalsa/$pkgname/archive/${pkgver}.tar.gz
	0001-interval.h-add-missing-header.patch
	0002-Fix-integer-division-issue-in-int_to_percent-functio.patch
	0003-pcm-readi-Fixed-segfault-in-failure-recovery.patch
	0004-pcm-writei-fix-Wmaybe-uninitialized-warning.patch"
builddir="$srcdir"/$pkgname-$pkgver

build() {
	make
}

package() {
	make PREFIX=/usr DESTDIR="$pkgdir" install
}

sha512sums="869c70103cc74eed9e7e14b38a349d662c64d3c371a61882ea9c78d915e40277ce6776aa4018c7e1a4140e7d2434ef46c5ac9611c5ae39d976090e8a6cf5c7ad  tinyalsa-1.1.1.tar.gz
fa0ccabbd902c5acaa575906cd29d7ed908131f51c7758f493091e60913452e2b60c61143cd15552637833021346cae5d72468a837f53b2ee342583363399937  0001-interval.h-add-missing-header.patch
93442854115ee2d78e89cd6c3f297655f39c03073bcac4dcd1d1db36c573036348b6cb273256e032d7348ac24889fd8a16cc6eac08c278b039001e13b6232c33  0002-Fix-integer-division-issue-in-int_to_percent-functio.patch
8eca326ba2dc59ee1f788af98b0d5041b5865f87fdb64fc2a9b4ee943a6abe1cd13129fd618ec1062743f8dfac257b0e268c6eb68febae85a94e643c4acbc671  0003-pcm-readi-Fixed-segfault-in-failure-recovery.patch
2fc072749f1b9f2adad01caa577d7052d83d4316b792c0cd04961c0802a95e0952b9a5759e5aba3cae5488d109bbd6cbaa5d922e87f2256a23db365141d12207  0004-pcm-writei-fix-Wmaybe-uninitialized-warning.patch"
