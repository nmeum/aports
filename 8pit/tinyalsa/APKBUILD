# Contributor: Sören Tempel <soeren+alpine@soeren-tempel.net>
# Maintainer: Sören Tempel <soeren+alpine@soeren-tempel.net>
pkgname=tinyalsa
pkgver=1.1.0
pkgrel=1
pkgdesc="Tiny library to interface with ALSA in the Linux kernel"
url="https://github.com/tinyalsa/tinyalsa"
arch="all"
license="BSD"
depends=""
depends_dev=""
makedepends="$depends_dev linux-headers"
install=""
subpackages="$pkgname-libs $pkgname-dev $pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/tinyalsa/$pkgname/archive/${pkgver}.tar.gz
	fix-percent.patch"

builddir="$srcdir"/$pkgname-$pkgver
build() {
	make -C "$builddir" || return 1
}

package() {
	make PREFIX=/usr DESTDIR="$pkgdir" \
		-C "$builddir" install || return 1
}

libs() {
	default_libs

	mkdir -p "$subpkgdir"/usr/lib/
	mv "$pkgdir"/usr/lib/libtinyalsa.so \
		"$subpkgdir"/usr/lib/ || return 1
}

md5sums="fb2b94626e3e112f6531c5ce8a9795e0  tinyalsa-1.1.0.tar.gz
b1f898f6d628a52ec99e5a09d020f67b  fix-percent.patch"
sha256sums="93f4ca1e6345974167dc5577e8151a31fa2e6a628727a72d59e18db2289e7a1c  tinyalsa-1.1.0.tar.gz
7dafa0d7e5452d68b7bf969814c8ba68764d1965185b553998c6ba9bf394304b  fix-percent.patch"
sha512sums="25a11084e0d27d5f44586a87ffb77d189ebec1348d264f8d2bb57d9dfc539a98d3716794e70757cf3c1c98291fc9084f054e4464ff6050fb31f8ff443b4ead37  tinyalsa-1.1.0.tar.gz
d0ac55a70f874a820e3a800c52188085fbfd1d7bb3e6204d865fe608f56d7c8aab3d958827db868d13b630b94a5ab1b0de1edfc4ac86ee19835cc0cd6b18da0f  fix-percent.patch"
